
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Contexts Â· GreenPipes</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-prism/prism.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="../build/gitbook.css">
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="filters.html" />
    
    
    <link rel="prev" href="atoms.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        <li class="header">Overview</li>
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="atoms.html">
            
                <a href="atoms.html">
            
                    
                    Atoms
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.3" data-path="contexts.html">
            
                <a href="contexts.html">
            
                    
                    Contexts
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="filters.html">
            
                <a href="filters.html">
            
                    
                    Filters
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Usage</li>
        
        
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Contexts</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="contexts">Contexts</h1>
<p>The <code>context</code> is the unit of an interaction with a pipe. Each time you call <code>pipe.Send</code> you will be passing an instance of a <code>PipeContext</code>. This is not your typical message payload. This is the context for passing through the pipes. If you built a message bus on top of GreenPipes the message would exist in the context, but would not be the context. The context can store data inside of it, and should be considered write only and once a value is written it should be immutable.</p>
<blockquote>
<p>We highly recommend using interfaces with Read Only properties when ever possible.</p>
</blockquote>
<h2 id="example-context">Example Context</h2>
<p>An example of a <code>PipeContext</code> might be easier to digest than the abstract paragraph above. First, we need to create an interface that represents our context. Lets pretend that we are building an email pipeline. Step one is to create the interface we will run our pipeline off of.</p>
<pre class="language-"><code class="lang-csharp"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IEmailSendContext</span> <span class="token punctuation">:</span> PipeContext
<span class="token punctuation">{</span>
  MailAddress To <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token keyword">string</span> Subject <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token keyword">string</span> Body <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Next, we implement the context.</p>
<pre class="language-"><code class="lang-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">InMemoryEmailSendContext</span> <span class="token punctuation">:</span> BasePipeContext<span class="token punctuation">,</span> IEmailSendContext
<span class="token punctuation">{</span>
  <span class="token keyword">public</span> MailAddress To <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token keyword">string</span> Subject <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token keyword">string</span> Body <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>We are now ready to send this context down the pipe.</p>
<h2 id="overly-simple-usage">Overly simple usage</h2>
<pre class="language-"><code class="lang-csharp"><span class="token keyword">var</span> pipe <span class="token operator">=</span> CustomEmailPipeline<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">InMemoryEmailSendContext</span><span class="token punctuation">(</span><span class="token string">&quot;letsdothis@now.com&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Welcome to Now.com&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Let&apos;s Go Now!&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">await</span> pipe<span class="token punctuation">.</span><span class="token function">Send</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2 id="loading-up-a-context-with-http-stuffs">Loading up a context with HTTP stuffs</h2>
<p>Side note, you can load any of your contexts up with HTTP data like so.</p>
<pre class="language-"><code class="lang-csharp"><span class="token keyword">var</span> httpContext <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HttpContext</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>Request<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>Response<span class="token punctuation">)</span><span class="token punctuation">;</span>
pipe<span class="token punctuation">.</span><span class="token function">Send</span><span class="token punctuation">(</span>httpContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="atoms.html" class="navigation navigation-prev " aria-label="Previous page: Atoms">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="filters.html" class="navigation navigation-next " aria-label="Next page: Filters">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Contexts","level":"1.3","depth":1,"next":{"title":"Filters","level":"1.4","depth":1,"path":"overview/filters.md","ref":"overview/filters.md","articles":[]},"previous":{"title":"Atoms","level":"1.2","depth":1,"path":"overview/atoms.md","ref":"overview/atoms.md","articles":[]},"dir":"ltr"},"config":{"plugins":["edit-link","prism","-highlight","github","anchorjs","expandable-chapters"],"root":"docs","styles":{"website":"build/gitbook.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"prism":{},"github":{"url":"https://github.com/MassTransit/Greenipes/"},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"edit-link":{"label":"Edit This Page","base":"https://github.com/MassTransit/GreenPipes/tree/master/docs"},"theme-default":{"styles":{"website":"build/gitbook.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"anchorjs":{},"expandable-chapters":{}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"GreenPipes","gitbook":"3.2.2"},"file":{"path":"overview/contexts.md","mtime":"2017-01-20T00:12:24.602Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2017-01-20T00:15:38.870Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-edit-link/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/3.1.1/anchor.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-anchorjs/anchor-style.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

